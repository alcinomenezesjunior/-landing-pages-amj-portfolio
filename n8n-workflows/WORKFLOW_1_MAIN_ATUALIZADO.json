{
  "name": "1_AMJ_Lead_System_v3.2_WEBHOOK_UNICO",
  "nodes": [
    {
      "parameters": {
        "path": "leads-geral",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "webhook-trigger",
      "name": "üéØ Webhook - Captura Lead (√öNICO)",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1.1,
      "position": [
        250,
        300
      ],
      "webhookId": "amj-lead-capture-webhook-unified"
    },
    {
      "parameters": {
        "content": "## üì• FASE 1: CAPTURA DE LEADS - WEBHOOK √öNICO\n\n**Objetivo:** Receber leads das 4 landing pages\n\n**Origens Suportadas:**\n- LP_Agencia_Trafego (Ag√™ncia Tr√°fego Pago)\n- LP_Agentes_IA (Agentes IA Empresarial)\n- LP_Chatbot_Estetica (Chatbot Est√©tica)\n- LP_Consultoria_PME (Consultoria PME)\n\n**Dados Capturados:**\n- Nome, Email, Instagram, WhatsApp\n- Origem (c√≥digo e nome da LP)\n- Timestamp\n- Dados t√©cnicos (device, browser, OS, localiza√ß√£o)\n\n**Pr√≥ximo Passo:** Valida√ß√£o e enriquecimento",
        "height": 320,
        "width": 350,
        "color": 4
      },
      "id": "sticky-fase1",
      "name": "Sticky Note - Fase 1",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        220,
        120
      ]
    },
    {
      "parameters": {
        "mode": "combine",
        "combinationMode": "multiplex",
        "options": {}
      },
      "id": "merge-webhook-data",
      "name": "üîÑ Merge - Dados Webhook",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 2.1,
      "position": [
        450,
        300
      ]
    },
    {
      "parameters": {
        "jsCode": "// Valida√ß√£o e formata√ß√£o de dados do lead - WEBHOOK √öNICO\nconst items = $input.all();\nconst output = [];\n\nfor (const item of items) {\n  const data = item.json;\n  \n  // ===== PROCESSAMENTO DE ORIGEM (NOVO) =====\n  const origemCodigo = data.origem || 'LP_Desconhecida';\n  const paginaOrigem = data.landing_page || 'N√£o especificada';\n  \n  // Mapear c√≥digo de origem para descri√ß√£o amig√°vel\n  const origemMap = {\n    'LP_Agencia_Trafego': 'Landing Page Ag√™ncia - Tr√°fego Pago',\n    'LP_Agentes_IA': 'Landing Page Agentes de IA',\n    'LP_Chatbot_Estetica': 'Landing Page Chatbot Est√©tica',\n    'LP_Consultoria_PME': 'Landing Page Consultoria PME'\n  };\n  \n  const origemDescricao = origemMap[origemCodigo] || paginaOrigem;\n  \n  // ===== PROCESSAMENTO WHATSAPP =====\n  // Formata WhatsApp para padr√£o internacional\n  let whatsapp = data.whatsapp || data.telefone || '';\n  whatsapp = whatsapp.replace(/\\D/g, ''); // Remove n√£o-num√©ricos\n  \n  if (whatsapp && !whatsapp.startsWith('351')) {\n    whatsapp = '351' + whatsapp; // Adiciona c√≥digo Portugal\n  }\n  \n  // Gera Link WhatsApp\n  const whatsappLink = whatsapp ? `https://wa.me/${whatsapp}` : '';\n  \n  // ===== DADOS T√âCNICOS =====\n  const userAgent = data.userAgent || '';\n  const dispositivo = userAgent.includes('Mobile') ? 'Mobile' : 'Desktop';\n  const navegador = userAgent.includes('Chrome') ? 'Chrome' : \n                    userAgent.includes('Firefox') ? 'Firefox' : \n                    userAgent.includes('Safari') ? 'Safari' : 'Outro';\n  const os = userAgent.includes('Windows') ? 'Windows' : \n             userAgent.includes('Mac') ? 'macOS' : \n             userAgent.includes('Linux') ? 'Linux' : \n             userAgent.includes('Android') ? 'Android' : \n             userAgent.includes('iOS') ? 'iOS' : 'Outro';\n  \n  // ===== OUTPUT COMPLETO =====\n  output.push({\n    json: {\n      timestamp: new Date().toISOString(),\n      nome: data.nome || '',\n      email: data.email || '',\n      instagram: data.instagram || '',\n      whatsapp: whatsapp,\n      whatsappLink: whatsappLink,\n      status: 'Novo',\n      dataContacto: '',\n      meioContacto: '',\n      notasEnriquecimento: '',\n      leadScore: 0,\n      emailEnviado: 'N√£o',\n      whatsappEnviado: 'N√£o',\n      ultimaInteracao: new Date().toISOString(),\n      interesse: data.interesse || '',\n      servico: data.servico || '',\n      // ===== CAMPOS DE ORIGEM (NOVOS) =====\n      origem: origemDescricao,\n      origemCodigo: origemCodigo,\n      paginaOrigem: paginaOrigem,\n      // ===== OUTROS CAMPOS =====\n      valorProposta: '',\n      probabilidadeConversao: '',\n      observacoes: '',\n      dispositivo: dispositivo,\n      navegador: navegador,\n      os: os,\n      pais: data.country || 'Portugal',\n      distrito: data.region || '',\n      cidade: data.city || '',\n      provedor: data.isp || '',\n      referrer: data.referrer || 'Direto',\n      idioma: data.language || 'pt-PT'\n    }\n  });\n}\n\nreturn output;"
      },
      "id": "code-validate-format",
      "name": "‚öôÔ∏è Code - Validar e Formatar (WEBHOOK √öNICO)",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        650,
        300
      ]
    },
    {
      "parameters": {
        "content": "## üîç FASE 2: ENRIQUECIMENTO COM IA\n\n**Objetivo:** Analisar e enriquecer dados do lead\n\n**Agente IA:**\n- Modelo: Perplexity Sonar\n- An√°lise de perfil\n- Identifica√ß√£o de necessidades\n- Pesquisa de mercado local\n\n**Output:** Notas estruturadas sobre o lead",
        "height": 280,
        "width": 320,
        "color": 5
      },
      "id": "sticky-fase2",
      "name": "Sticky Note - Fase 2",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        820,
        140
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.perplexity.ai/chat/completions",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": []
        },
        "specifyBody": "json",
        "jsonBody": "={\n  \"model\": \"llama-3.1-sonar-large-128k-online\",\n  \"messages\": [\n    {\n      \"role\": \"system\",\n      \"content\": \"Voc√™ √© um analista de mercado especializado em cl√≠nicas de est√©tica em Portugal. Use suas capacidades de pesquisa online para encontrar informa√ß√µes atualizadas sobre o lead e o mercado.\"\n    },\n    {\n      \"role\": \"user\",\n      \"content\": \"Analise este lead de cl√≠nica de est√©tica e fa√ßa uma pesquisa completa:\\n\\n**DADOS DO LEAD:**\\nNome: {{ $json.nome }}\\nEmail: {{ $json.email }}\\nInstagram: {{ $json.instagram }}\\nWhatsApp: {{ $json.whatsapp }}\\nCidade: {{ $json.cidade }}, {{ $json.distrito }}\\nInteresse: {{ $json.interesse }}\\nServi√ßo: {{ $json.servico }}\\nDispositivo: {{ $json.dispositivo }}\\nOrigem: {{ $json.paginaOrigem }} ({{ $json.origemCodigo }})\\n\\n**TAREFAS DE PESQUISA:**\\n\\n1. **Pesquise sobre a pessoa/cl√≠nica:**\\n   - Se o Instagram foi fornecido, tente encontrar informa√ß√µes sobre o perfil\\n   - Tipo de neg√≥cio (cl√≠nica estabelecida, profissional solo, novo neg√≥cio)\\n   - Presen√ßa digital existente\\n\\n2. **Contexto do mercado local:**\\n   - Pesquise sobre o mercado de est√©tica em {{ $json.cidade }}\\n   - Concorr√™ncia na regi√£o\\n   - Tend√™ncias atuais (2024-2025)\\n\\n3. **An√°lise de necessidades:**\\n   - Com base no interesse manifestado: {{ $json.interesse }}\\n   - Dores t√≠picas de cl√≠nicas deste porte\\n   - Oportunidades de automa√ß√£o espec√≠ficas\\n\\n4. **Recomenda√ß√µes t√°ticas:**\\n   - Qual pacote AMJ seria mais adequado? (Essencial ‚Ç¨690+‚Ç¨179/m√™s, Pro ‚Ç¨990+‚Ç¨279/m√™s, Enterprise ‚Ç¨1490+‚Ç¨390/m√™s)\\n   - Pontos de dor priorit√°rios a abordar\\n   - √Çngulo de abordagem recomendado\\n\\n**FORMATO DE RESPOSTA:**\\nForne√ßa uma an√°lise estruturada em portugu√™s de Portugal (m√°ximo 600 palavras) com:\\n\\n### üìä Perfil do Lead\\n[Descri√ß√£o do neg√≥cio/profissional]\\n\\n### üéØ Necessidades Identificadas\\n[Lista de 3-4 necessidades principais]\\n\\n### üí° Oportunidades de Automa√ß√£o\\n[Como AMJ pode ajudar especificamente]\\n\\n### üéÅ Pacote Recomendado\\n[Essencial/Pro/Enterprise e porqu√™]\\n\\n### üìù Abordagem Sugerida\\n[Como iniciar o contato - tom, √¢ngulo, pontos-chave]\\n\\n**IMPORTANTE:**\\n- Use informa√ß√µes reais encontradas online quando dispon√≠vel\\n- Se n√£o encontrar informa√ß√µes espec√≠ficas, fa√ßa infer√™ncias baseadas nos dados fornecidos e no mercado geral\\n- Foque em insights ACION√ÅVEIS para vendas\\n- Seja conciso mas completo\"\n    }\n  ],\n  \"temperature\": 0.6,\n  \"max_tokens\": 1000\n}",
        "options": {}
      },
      "id": "perplexity-enrichment",
      "name": "üîç Perplexity - Enriquecimento Lead",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        850,
        300
      ],
      "credentials": {
        "httpHeaderAuth": {
          "id": "perplexity-api-key",
          "name": "Perplexity API"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Extrai an√°lise do Perplexity e formata\nconst items = $input.all();\nconst output = [];\n\nfor (const item of items) {\n  let perplexityResponse;\n  \n  // Tenta extrair a resposta do Perplexity\n  try {\n    if (item.json.choices && item.json.choices[0]) {\n      perplexityResponse = item.json.choices[0].message.content;\n    } else if (item.json.message && item.json.message.content) {\n      perplexityResponse = item.json.message.content;\n    } else {\n      perplexityResponse = 'An√°lise n√£o dispon√≠vel - lead capturado para an√°lise manual.';\n    }\n  } catch (error) {\n    perplexityResponse = 'Erro ao processar an√°lise Perplexity - lead capturado para revis√£o.';\n  }\n  \n  // Pega dados do lead do input anterior\n  const leadData = $('‚öôÔ∏è Code - Validar e Formatar (WEBHOOK √öNICO)').first().json;\n  \n  output.push({\n    json: {\n      ...leadData,\n      notasEnriquecimento: perplexityResponse\n    }\n  });\n}\n\nreturn output;"
      },
      "id": "code-parse-perplexity",
      "name": "‚öôÔ∏è Code - Parse Perplexity",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1050,
        300
      ]
    },
    {
      "parameters": {
        "content": "## üéØ FASE 3: LEAD SCORING\n\n**Objetivo:** Calcular pontua√ß√£o do lead\n\n**Agente IA:**\n- Modelo: GPT-4 Turbo\n- Crit√©rios: Dados, Qualidade, Geografia, Interesse, Comportamento, An√°lise Perplexity\n\n**Classifica√ß√£o:**\n- 80-100: Quente üî•\n- 50-79: Morno üü°\n- 0-49: Frio ‚ùÑÔ∏è",
        "height": 320,
        "width": 320,
        "color": 6
      },
      "id": "sticky-fase3",
      "name": "Sticky Note - Fase 3",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1220,
        140
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.openai.com/v1/chat/completions",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"model\": \"gpt-4-turbo-preview\",\n  \"messages\": [\n    {\n      \"role\": \"system\",\n      \"content\": \"Voc√™ √© um especialista em lead scoring para o mercado B2B de automa√ß√£o em Portugal. Analise leads de forma objetiva e atribua pontua√ß√µes baseadas em dados concretos.\"\n    },\n    {\n      \"role\": \"user\",\n      \"content\": \"Calcule o Lead Score deste potencial cliente de automa√ß√£o WhatsApp:\\n\\n**DADOS DO LEAD:**\\nNome: {{ $json.nome }}\\nEmail: {{ $json.email }}\\nInstagram: {{ $json.instagram }}\\nWhatsApp: {{ $json.whatsapp }}\\nCidade: {{ $json.cidade }}, {{ $json.distrito }}\\nDispositivo: {{ $json.dispositivo }}\\nNavegador: {{ $json.navegador }}\\nInteresse: {{ $json.interesse }}\\nServi√ßo: {{ $json.servico }}\\nReferrer: {{ $json.referrer }}\\nOrigem: {{ $json.paginaOrigem }} ({{ $json.origemCodigo }})\\n\\n**AN√ÅLISE PERPLEXITY:**\\n{{ $json.notasEnriquecimento }}\\n\\n**CRIT√âRIOS DE PONTUA√á√ÉO (Total: 100 pontos):**\\n\\n**1. COMPLETUDE DE DADOS (20 pontos):**\\n- Nome completo v√°lido: +5pts\\n- Email profissional/v√°lido: +5pts\\n- WhatsApp no formato correto: +5pts\\n- Instagram fornecido: +5pts\\n\\n**2. QUALIDADE DO CONTATO (25 pontos):**\\n- Instagram ativo/profissional: +10pts\\n- WhatsApp validado: +10pts\\n- Email corporativo (n√£o Gmail/Hotmail): +5pts\\n\\n**3. CONTEXTO GEOGR√ÅFICO (15 pontos):**\\n- Grande centro urbano (Lisboa, Porto, Braga, Coimbra): +10pts\\n- Cidade m√©dia: +7pts\\n- √Årea tur√≠stica (Algarve, Madeira): +5pts\\n\\n**4. INTERESSE E ESPECIFICIDADE (20 pontos):**\\n- Interesse muito espec√≠fico/detalhado: +15pts\\n- Servi√ßo claramente definido: +10pts\\n- Mencionou problema/dor espec√≠fica: +5pts\\n\\n**5. COMPORTAMENTO DIGITAL (10 pontos):**\\n- Acesso mobile (t√≠pico de empreendedor ativo): +5pts\\n- Tr√°fego referenciado (n√£o direto): +5pts\\n\\n**6. AN√ÅLISE PERPLEXITY (10 pontos):**\\n- Alta urg√™ncia detectada: +5pts\\n- Presen√ßa digital estabelecida: +3pts\\n- Mercado aquecido na regi√£o: +2pts\\n\\n**SUA TAREFA:**\\nRetorne APENAS um objeto JSON v√°lido (sem markdown, sem explica√ß√µes) com esta estrutura EXATA:\\n\\n{\\n  \\\"leadScore\\\": [n√∫mero de 0-100],\\n  \\\"classificacao\\\": \\\"Quente üî•\\\" ou \\\"Morno üü°\\\" ou \\\"Frio ‚ùÑÔ∏è\\\",\\n  \\\"probabilidadeConversao\\\": \\\"XX-YY%\\\",\\n  \\\"pontosPorCategoria\\\": {\\n    \\\"completudeDados\\\": [0-20],\\n    \\\"qualidadeContato\\\": [0-25],\\n    \\\"contextoGeografico\\\": [0-15],\\n    \\\"interesseEspecificidade\\\": [0-20],\\n    \\\"comportamentoDigital\\\": [0-10],\\n    \\\"analisePerplexity\\\": [0-10]\\n  },\\n  \\\"justificativa\\\": \\\"Breve explica√ß√£o de 2-3 linhas do score\\\",\\n  \\\"proximosPassos\\\": \\\"Recomenda√ß√£o t√°tica de abordagem\\\"\\n}\\n\\n**CLASSIFICA√á√ÉO:**\\n- 80-100 pontos = Quente üî• (Probabilidade: 70-90%)\\n- 50-79 pontos = Morno üü° (Probabilidade: 40-70%)\\n- 0-49 pontos = Frio ‚ùÑÔ∏è (Probabilidade: 10-40%)\\n\\n**IMPORTANTE:**\\n- Seja rigoroso mas justo\\n- Baseie-se em DADOS, n√£o em suposi√ß√µes\\n- JSON deve ser v√°lido e parse√°vel\\n- N√ÉO adicione markdown (```json)\\n- Retorne APENAS o JSON\"\n    }\n  ],\n  \"temperature\": 0.3,\n  \"max_tokens\": 500\n}",
        "options": {}
      },
      "id": "gpt4-lead-scoring",
      "name": "üéØ GPT-4 - Lead Scoring",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1250,
        300
      ],
      "credentials": {
        "httpHeaderAuth": {
          "id": "openai-api-key",
          "name": "OpenAI API"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Parse Lead Score do GPT-4\nconst items = $input.all();\nconst output = [];\n\nfor (const item of items) {\n  let scoringData;\n  \n  try {\n    const gpt4Response = item.json.choices[0].message.content;\n    \n    // Remove markdown se houver\n    let cleanJson = gpt4Response.replace(/```json\\n?/g, '').replace(/```\\n?/g, '').trim();\n    \n    // Parse JSON\n    scoringData = JSON.parse(cleanJson);\n  } catch (error) {\n    // Fallback se JSON inv√°lido\n    scoringData = {\n      leadScore: 50,\n      classificacao: 'Morno üü°',\n      probabilidadeConversao: '40-70%',\n      justificativa: 'Score calculado com dados parciais - an√°lise manual recomendada',\n      proximosPassos: 'Revisar manualmente e ajustar abordagem'\n    };\n  }\n  \n  // Pega dados anteriores do lead\n  const leadData = $('‚öôÔ∏è Code - Parse Perplexity').first().json;\n  \n  // Monta observa√ß√µes detalhadas\n  const observacoes = `Score: ${scoringData.leadScore}/100 | ${scoringData.classificacao} | ${scoringData.justificativa}`;\n  \n  output.push({\n    json: {\n      ...leadData,\n      leadScore: scoringData.leadScore,\n      status: scoringData.classificacao,\n      probabilidadeConversao: scoringData.probabilidadeConversao,\n      observacoes: observacoes\n    }\n  });\n}\n\nreturn output;"
      },
      "id": "code-parse-scoring",
      "name": "‚öôÔ∏è Code - Parse Lead Score",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1450,
        300
      ]
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1YZ6oN42skTdjYT9uVAuLHXwAhlgxqe9gphygHtXuxzI",
          "mode": "id"
        },
        "sheetName": {
          "__rl": true,
          "value": "leads",
          "mode": "name"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "timestamp": "={{ $json.timestamp }}",
            "nome": "={{ $json.nome }}",
            "email": "={{ $json.email }}",
            "instagram": "={{ $json.instagram }}",
            "whatsapp": "={{ $json.whatsapp }}",
            "status": "={{ $json.status }}",
            "dataContacto": "={{ $json.dataContacto }}",
            "meioContacto": "={{ $json.meioContacto }}",
            "notasEnriquecimento": "={{ $json.notasEnriquecimento }}",
            "leadScore": "={{ $json.leadScore }}",
            "emailEnviado": "={{ $json.emailEnviado }}",
            "whatsappEnviado": "={{ $json.whatsappEnviado }}",
            "ultimaInteracao": "={{ $json.ultimaInteracao }}",
            "interesse": "={{ $json.interesse }}",
            "servico": "={{ $json.servico }}",
            "origem": "={{ $json.origem }}",
            "valorProposta": "={{ $json.valorProposta }}",
            "probabilidadeConversao": "={{ $json.probabilidadeConversao }}",
            "observacoes": "={{ $json.observacoes }}",
            "linkWhatsapp": "={{ $json.whatsappLink }}",
            "dispositivo": "={{ $json.dispositivo }}",
            "navegador": "={{ $json.navegador }}",
            "os": "={{ $json.os }}",
            "pais": "={{ $json.pais }}",
            "distrito": "={{ $json.distrito }}",
            "cidade": "={{ $json.cidade }}",
            "provedor": "={{ $json.provedor }}",
            "referrer": "={{ $json.referrer }}",
            "idioma": "={{ $json.idioma }}"
          }
        },
        "options": {}
      },
      "id": "sheets-save-lead",
      "name": "üìä Google Sheets - Salvar Lead (COM ORIGEM)",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.4,
      "position": [
        1650,
        300
      ],
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "google-sheets-oauth",
          "name": "Google Sheets OAuth2"
        }
      }
    },
    {
      "parameters": {
        "content": "## üìß FASE 4: EMAIL AUTOM√ÅTICO\n\n**Objetivo:** Enviar primeiro email personalizado\n\n**Processo:**\n1. IA (Claude) gera email customizado\n2. Notifica√ß√£o Telegram para aprova√ß√£o\n3. Aguarda resposta humana\n4. Envia se aprovado\n\n**Timing:** Imediato ap√≥s scoring\n\n**Pr√≥ximo:** Email 2 em 24h",
        "height": 300,
        "width": 320,
        "color": 3
      },
      "id": "sticky-fase4",
      "name": "Sticky Note - Fase 4",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1820,
        140
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.anthropic.com/v1/messages",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            },
            {
              "name": "anthropic-version",
              "value": "2023-06-01"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"model\": \"claude-sonnet-4-20250514\",\n  \"max_tokens\": 2000,\n  \"temperature\": 0.8,\n  \"messages\": [\n    {\n      \"role\": \"user\",\n      \"content\": \"Voc√™ √© um copywriter portugu√™s especializado em emails de vendas B2B para cl√≠nicas de est√©tica. Seu estilo √© profissional mas caloroso, consultivo e emp√°tico.\\n\\n**CONTEXTO DO NEG√ìCIO AMJ:**\\nVendemos automa√ß√£o de WhatsApp para cl√≠nicas de est√©tica em Portugal. Nosso foco √© resolver problemas de comunica√ß√£o, perda de clientes por demora nas respostas, e aumentar convers√µes atrav√©s de automa√ß√£o inteligente com IA.\\n\\n**PACOTES AMJ:**\\n- Essencial: ‚Ç¨690 setup + ‚Ç¨179/m√™s\\n- Pro: ‚Ç¨990 setup + ‚Ç¨279/m√™s\\n- Enterprise: ‚Ç¨1490 setup + ‚Ç¨390/m√™s\\n\\n**DADOS DO LEAD:**\\nNome: {{ $json.nome }}\\nEmail: {{ $json.email }}\\nCidade: {{ $json.cidade }}, {{ $json.distrito }}\\nInstagram: {{ $json.instagram }}\\nInteresse manifestado: {{ $json.interesse }}\\nServi√ßo espec√≠fico: {{ $json.servico }}\\nLead Score: {{ $json.leadScore }}/100\\nClassifica√ß√£o: {{ $json.status }}\\nOrigem: {{ $json.paginaOrigem }} ({{ $json.origemCodigo }})\\n\\n**AN√ÅLISE COMPLETA DO LEAD (Perplexity):**\\n{{ $json.notasEnriquecimento }}\\n\\n**AN√ÅLISE DE SCORING (GPT-4):**\\n{{ $json.observacoes }}\\n\\n---\\n\\n**SUA MISS√ÉO:**\\nCrie um email de boas-vindas ALTAMENTE PERSONALIZADO que soe genuinamente escrito por um humano portugu√™s. Este √© o PRIMEIRO contato - deve construir confian√ßa antes de vender.\\n\\n**ESTRUTURA OBRIGAT√ìRIA:**\\n\\n**ASSUNTO:** (Crie 1 op√ß√£o criativa, personalizada com nome e cidade)\\nExemplo: \\\"{{ $json.nome }}, como anda a gest√£o de clientes em {{ $json.cidade }}?\\\"\\n\\n**CORPO DO EMAIL:**\\n\\n**1. ABERTURA ULTRA-PERSONALIZADA (3-4 linhas)**\\n- Cumprimento pelo nome\\n- Refer√™ncia ESPEC√çFICA √† cidade ou regi√£o\\n- Conex√£o com o interesse manifestado: {{ $json.interesse }}\\n- Tom: Como se conhecesse a pessoa h√° algum tempo\\n\\n**2. EMPATIA COM DESAFIO ESPEC√çFICO (4-5 linhas)**\\n- Identifique UMA dor espec√≠fica baseada na an√°lise Perplexity\\n- Use dados reais: 'Cl√≠nicas em Portugal perdem 30-40% dos leads por resposta lenta no WhatsApp'\\n- Conte brevemente uma hist√≥ria de outra cl√≠nica similar (sem nomes)\\n- Crie sensa√ß√£o de 'ele entende mesmo o meu problema'\\n\\n**3. CURIOSIDADE SEM PITCH (3-4 linhas)**\\n- Mencione que trabalha com cl√≠nicas de est√©tica em Portugal\\n- Foco em resultados (n√£o em produto): 'Ajudo cl√≠nicas a responder todos os WhatsApp em menos de 2 minutos, 24/7'\\n- N√ÉO mencionar pre√ßos ou pacotes ainda\\n- Plantar semente de solu√ß√£o\\n\\n**4. SOCIAL PROOF SUTIL (2-3 linhas)**\\n- Mencione sucesso com cl√≠nicas portuguesas (sem nomes espec√≠ficos)\\n- N√∫mero concreto: 'Cl√≠nicas reduziram 60% do tempo gasto em WhatsApp'\\n- Deve soar factual, n√£o comercial\\n\\n**5. CALL-TO-ACTION SUAVE (2-3 linhas)**\\n- Ofere√ßa demonstra√ß√£o gratuita de 15min\\n- Frase: 'Quer ver como funcionaria na sua cl√≠nica em {{ $json.cidade }}?'\\n- Link: [PLACEHOLDER_CALENDAR_LINK]\\n- Alternativa: 'Responda este email com 'SIM' e agendamos'\\n\\n**6. ASSINATURA PROFISSIONAL MAS CALOROSA**\\nUm abra√ßo,\\nAlcino Menezes J√∫nior\\nFundador da AMJ Automa√ß√£o & IA\\nEspecialista em Automa√ß√£o para Cl√≠nicas de Est√©tica\\nWhatsApp: +351 926 698 959\\nalcinomenezesjunior.com\\n\\n**P.S.** [Adicione um P.S. relevante baseado na an√°lise do lead - pode ser uma curiosidade, estat√≠stica ou pergunta provocativa]\\n\\n---\\n\\n**DIRETRIZES DE TOM E ESTILO:**\\n\\n‚úÖ **FAZER:**\\n- Usar portugu√™s de Portugal natural (voc√™/sua, n√£o tu/tua)\\n- Parecer escrito por humano, n√£o por IA\\n- Personalizar com detalhes espec√≠ficos do lead\\n- Ser consultivo, emp√°tico e profissional\\n- M√°ximo 450 palavras\\n- Par√°grafos curtos (2-4 linhas)\\n- Uma emo√ß√£o: interesse genu√≠no em ajudar\\n\\n‚ùå **N√ÉO FAZER:**\\n- Linguagem muito formal/corporativa\\n- Paredes de texto\\n- Excesso de adjetivos\\n- Emojis no corpo (s√≥ no assunto se fizer sentido)\\n- Mencionar pre√ßos neste primeiro email\\n- Frases feitas ou clich√™s\\n- Tom de vendedor desesperado\\n\\n**IMPORTANTE:**\\n- Este email ser√° enviado ap√≥s aprova√ß√£o humana via Telegram\\n- Deve ter taxa de resposta alta (>15%)\\n- Lead deve pensar: 'Esta pessoa entende o meu neg√≥cio'\\n- Foco em VALOR e CONFIAN√áA, n√£o em venda imediata\\n\\n---\\n\\n**OUTPUT ESPERADO:**\\nForne√ßa o email completo (assunto + corpo) pronto para enviar. N√£o adicione explica√ß√µes, coment√°rios ou markdown. Apenas o email puro em texto.\\n\\nCOMECE AGORA:\"\n    }\n  ]\n}",
        "options": {}
      },
      "id": "claude-email-generation",
      "name": "‚úâÔ∏è Claude - Gerar Email 1",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1850,
        300
      ],
      "credentials": {
        "httpHeaderAuth": {
          "id": "anthropic-api-key",
          "name": "Anthropic Claude API"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Parse email gerado pelo Claude\nconst items = $input.all();\nconst output = [];\n\nfor (const item of items) {\n  let emailContent;\n  \n  try {\n    // Claude retorna no formato diferente do OpenAI\n    emailContent = item.json.content[0].text;\n  } catch (error) {\n    emailContent = 'Erro ao gerar email - revis√£o manual necess√°ria.';\n  }\n  \n  // Separa assunto do corpo\n  const lines = emailContent.split('\\n').filter(line => line.trim().length > 0);\n  let subject = '';\n  let body = '';\n  let foundBody = false;\n  \n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i];\n    \n    if (line.toLowerCase().includes('assunto:') && !subject) {\n      subject = line.replace(/.*assunto:/i, '').trim();\n    } else if (line.toLowerCase().includes('corpo do email:') || line.toLowerCase().includes('corpo:')) {\n      foundBody = true;\n      continue;\n    } else if (foundBody && line.trim().length > 0) {\n      body += line + '\\n';\n    } else if (!subject && !foundBody && i === 0) {\n      // Primeira linha pode ser o assunto\n      subject = line.trim();\n    } else if (i > 0 && !foundBody) {\n      body += line + '\\n';\n    }\n  }\n  \n  // Fallback se n√£o encontrou marcadores claros\n  if (!subject && lines.length > 0) {\n    subject = lines[0].substring(0, 100); // Primeiros 100 chars\n  }\n  \n  if (!body) {\n    body = lines.slice(1).join('\\n');\n  }\n  \n  // Limpa formata√ß√£o markdown se houver\n  body = body.replace(/\\*\\*/g, '').replace(/\\*/g, '').trim();\n  subject = subject.replace(/\\*\\*/g, '').replace(/\\*/g, '').replace(/\"/g, '').trim();\n  \n  // Pega dados do lead\n  const leadData = $('‚öôÔ∏è Code - Parse Lead Score').first().json;\n  \n  output.push({\n    json: {\n      ...leadData,\n      emailSubject: subject,\n      emailBody: body\n    }\n  });\n}\n\nreturn output;"
      },
      "id": "code-parse-claude-email",
      "name": "‚öôÔ∏è Code - Parse Email Claude",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2050,
        300
      ]
    },
    {
      "parameters": {
        "chatId": "YOUR_TELEGRAM_CHAT_ID",
        "text": "=üîî **NOVO LEAD AMJ - APROVA√á√ÉO NECESS√ÅRIA**\n\n**Lead #{{ $json.leadScore }}** - {{ $json.status }}\n\nüë§ **Nome:** {{ $json.nome }}\nüìß **Email:** {{ $json.email }}\nüì± **WhatsApp:** {{ $json.whatsapp }}\nüìç **Localiza√ß√£o:** {{ $json.cidade }}, {{ $json.distrito }}\nüéØ **Interesse:** {{ $json.interesse }}\nüåê **Origem:** {{ $json.paginaOrigem }}\n\n**üìä Score:** {{ $json.leadScore }}/100\n**üé≤ Convers√£o:** {{ $json.probabilidadeConversao }}\n\n**üìù AN√ÅLISE IA:**\n{{ $json.notasEnriquecimento }}\n\n---\n\n**‚úâÔ∏è EMAIL GERADO:**\n\n**Assunto:** {{ $json.emailSubject }}\n\n{{ $json.emailBody }}\n\n---\n\n**APROVAR ENVIO?**\n\n‚úÖ Digite: `/aprovar email {{ $json.email }}`\n‚ùå Digite: `/rejeitar email {{ $json.email }}`\n‚úèÔ∏è Editar: `/editar email {{ $json.email }}`",
        "additionalFields": {
          "parseMode": "Markdown"
        }
      },
      "id": "telegram-approval",
      "name": "üì≤ Telegram - Pedir Aprova√ß√£o",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        2250,
        300
      ],
      "credentials": {
        "telegramApi": {
          "id": "telegram-bot-credentials",
          "name": "Telegram Bot"
        }
      }
    },
    {
      "parameters": {
        "updates": [
          "message"
        ],
        "additionalFields": {}
      },
      "id": "telegram-trigger",
      "name": "üì± Telegram - Receber Resposta",
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1.1,
      "position": [
        2050,
        500
      ],
      "webhookId": "telegram-approval-webhook",
      "credentials": {
        "telegramApi": {
          "id": "telegram-bot-credentials",
          "name": "Telegram Bot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.message.text }}",
              "operation": "contains",
              "value2": "/aprovar email"
            }
          ]
        }
      },
      "id": "if-approved",
      "name": "‚ùì IF - Email Aprovado?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        2250,
        500
      ]
    },
    {
      "parameters": {
        "jsCode": "// Extrai email do comando Telegram\nconst items = $input.all();\nconst output = [];\n\nfor (const item of items) {\n  const command = item.json.message.text;\n  const emailMatch = command.match(/\\/aprovar email (.+)/);\n  \n  if (emailMatch) {\n    output.push({\n      json: {\n        approvedEmail: emailMatch[1].trim()\n      }\n    });\n  }\n}\n\nreturn output;"
      },
      "id": "code-extract-email",
      "name": "‚öôÔ∏è Code - Extrair Email Aprovado",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2450,
        400
      ]
    },
    {
      "parameters": {
        "operation": "search",
        "documentId": {
          "__rl": true,
          "value": "1YZ6oN42skTdjYT9uVAuLHXwAhlgxqe9gphygHtXuxzI",
          "mode": "id"
        },
        "sheetName": {
          "__rl": true,
          "value": "leads",
          "mode": "name"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "C",
              "lookupValue": "={{ $json.approvedEmail }}"
            }
          ]
        },
        "options": {}
      },
      "id": "sheets-lookup-lead",
      "name": "üîç Sheets - Buscar Lead Aprovado",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.4,
      "position": [
        2650,
        400
      ],
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "google-sheets-oauth",
          "name": "Google Sheets OAuth2"
        }
      }
    },
    {
      "parameters": {
        "fromEmail": "contato@alcinomenezesjunior.com",
        "toEmail": "={{ $json.email }}",
        "subject": "={{ $json.emailSubject }}",
        "emailType": "html",
        "message": "={{ $json.emailBody }}",
        "options": {
          "senderName": "Alcino Menezes J√∫nior - AMJ Automa√ß√£o"
        }
      },
      "id": "email-send",
      "name": "üìß Email - Enviar ao Lead",
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 2.1,
      "position": [
        2850,
        400
      ],
      "credentials": {
        "smtp": {
          "id": "smtp-hostinger",
          "name": "SMTP Hostinger"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1YZ6oN42skTdjYT9uVAuLHXwAhlgxqe9gphygHtXuxzI",
          "mode": "id"
        },
        "sheetName": {
          "__rl": true,
          "value": "leads",
          "mode": "name"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "emailEnviado": "Sim - Email 1",
            "ultimaInteracao": "={{ $now.toISO() }}",
            "meioContacto": "Email",
            "dataContacto": "={{ $now.toFormat('dd/MM/yyyy HH:mm') }}"
          }
        },
        "options": {
          "usePathForKeyRow": true,
          "keyRow": "={{ $json.rowNumber }}"
        }
      },
      "id": "sheets-update-sent",
      "name": "‚úÖ Sheets - Marcar Email Enviado",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.4,
      "position": [
        3050,
        400
      ],
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "google-sheets-oauth",
          "name": "Google Sheets OAuth2"
        }
      }
    },
    {
      "parameters": {
        "chatId": "YOUR_TELEGRAM_CHAT_ID",
        "text": "=‚úÖ **EMAIL ENVIADO COM SUCESSO**\n\nüë§ Lead: {{ $json.nome }}\nüìß Email: {{ $json.email }}\n‚è∞ Enviado: {{ $now.toFormat('dd/MM/yyyy HH:mm') }}\n\nüéØ Pr√≥ximos Passos:\n- Email 2: Autom√°tico em 24h\n- WhatsApp: Autom√°tico ap√≥s Email 2 (48h)\n\nüìä Status atualizado no Google Sheets"
      },
      "id": "telegram-confirm",
      "name": "‚úÖ Telegram - Confirmar Envio",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3250,
        400
      ],
      "credentials": {
        "telegramApi": {
          "id": "telegram-bot-credentials",
          "name": "Telegram Bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "YOUR_TELEGRAM_CHAT_ID",
        "text": "=‚ùå **EMAIL REJEITADO**\n\nüë§ Lead: {{ $json.nome }}\nüìß Email: {{ $json.email }}\n\nüí° Voc√™ pode:\n1. Enviar email manualmente\n2. Aguardar novo lead\n3. Editar e reenviar"
      },
      "id": "telegram-reject",
      "name": "‚ùå Telegram - Email Rejeitado",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        2450,
        600
      ],
      "credentials": {
        "telegramApi": {
          "id": "telegram-bot-credentials",
          "name": "Telegram Bot"
        }
      }
    },
    {
      "parameters": {
        "content": "## üéâ FASE 5: ATIVA√á√ÉO DE FOLLOW-UPS\n\n**Objetivo:** Iniciar sequ√™ncias autom√°ticas\n\n**Workflows Ativados:**\n1. ‚úâÔ∏è Email 2 (24h)\n2. üì± WhatsApp Twilio (48h)\n3. üîÑ Nurturing (leads mornos)\n\n**Crit√©rio:** Baseado no Lead Score\n\n**Status:** Sistema completo ativo",
        "height": 280,
        "width": 320,
        "color": 7
      },
      "id": "sticky-fase5",
      "name": "Sticky Note - Fase 5",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        3420,
        140
      ]
    },
    {
      "parameters": {
        "conditions": {
          "number": [
            {
              "value1": "={{ $json.leadScore }}",
              "operation": "largerEqual",
              "value2": 50
            }
          ]
        }
      },
      "id": "if-hot-lead",
      "name": "üî• IF - Lead Quente/Morno?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        3450,
        400
      ]
    },
    {
      "parameters": {
        "workflowId": "={{ 'AMJ_Email_Sequence_2' }}",
        "fields": {
          "values": [
            {
              "name": "leadEmail",
              "value": "={{ $json.email }}"
            },
            {
              "name": "leadScore",
              "value": "={{ $json.leadScore }}"
            }
          ]
        }
      },
      "id": "trigger-email2",
      "name": "‚è∞ Execute - Email Sequence 2",
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1,
      "position": [
        3650,
        300
      ]
    },
    {
      "parameters": {
        "workflowId": "={{ 'AMJ_WhatsApp_Twilio_Followup' }}",
        "fields": {
          "values": [
            {
              "name": "leadEmail",
              "value": "={{ $json.email }}"
            },
            {
              "name": "leadWhatsapp",
              "value": "={{ $json.whatsapp }}"
            }
          ]
        }
      },
      "id": "trigger-whatsapp",
      "name": "üì± Execute - WhatsApp Followup",
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1,
      "position": [
        3650,
        400
      ]
    },
    {
      "parameters": {
        "workflowId": "={{ 'AMJ_Lead_Nurturing' }}",
        "fields": {
          "values": [
            {
              "name": "leadEmail",
              "value": "={{ $json.email }}"
            },
            {
              "name": "leadScore",
              "value": "={{ $json.leadScore }}"
            }
          ]
        }
      },
      "id": "trigger-nurturing",
      "name": "üå± Execute - Lead Nurturing",
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1,
      "position": [
        3650,
        600
      ]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ {\n  \"success\": true,\n  \"message\": \"Lead capturado e processado com sucesso!\",\n  \"leadEmail\": $json.email,\n  \"leadScore\": $json.leadScore,\n  \"status\": $json.status,\n  \"origem\": $json.origemCodigo,\n  \"timestamp\": $now.toISO()\n} }}",
        "options": {
          "responseCode": 200
        }
      },
      "id": "webhook-response",
      "name": "‚úÖ Webhook Response - Sucesso",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [
        3850,
        400
      ]
    },
    {
      "parameters": {
        "content": "## üìã INSTRU√á√ïES DE CONFIGURA√á√ÉO\n\n**1. Google Sheets:**\n- Criar planilha \"Leads captados\"\n- ADICIONAR COLUNAS: origemCodigo, paginaOrigem\n- Copiar ID do URL\n- Colar em todos nodes Google Sheets\n\n**2. Credenciais API:**\n- Perplexity API Key\n- OpenAI API Key\n- Anthropic API Key\n\n**3. Telegram Bot:**\n- Criar bot com @BotFather\n- Copiar token\n- Obter Chat ID\n\n**4. Testar:**\n- Enviar lead teste de cada LP\n- Verificar Google Sheets (origemCodigo)\n- Aprovar no Telegram\n- Confirmar email recebido",
        "height": 420,
        "width": 350,
        "color": 2
      },
      "id": "sticky-instructions",
      "name": "Sticky Note - Instru√ß√µes",
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        180,
        600
      ]
    }
  ],
  "pinData": {},
  "connections": {
    "üéØ Webhook - Captura Lead (√öNICO)": {
      "main": [
        [
          {
            "node": "üîÑ Merge - Dados Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üîÑ Merge - Dados Webhook": {
      "main": [
        [
          {
            "node": "‚öôÔ∏è Code - Validar e Formatar (WEBHOOK √öNICO)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "‚öôÔ∏è Code - Validar e Formatar (WEBHOOK √öNICO)": {
      "main": [
        [
          {
            "node": "üîç Perplexity - Enriquecimento Lead",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üîç Perplexity - Enriquecimento Lead": {
      "main": [
        [
          {
            "node": "‚öôÔ∏è Code - Parse Perplexity",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "‚öôÔ∏è Code - Parse Perplexity": {
      "main": [
        [
          {
            "node": "üéØ GPT-4 - Lead Scoring",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üéØ GPT-4 - Lead Scoring": {
      "main": [
        [
          {
            "node": "‚öôÔ∏è Code - Parse Lead Score",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "‚öôÔ∏è Code - Parse Lead Score": {
      "main": [
        [
          {
            "node": "üìä Google Sheets - Salvar Lead (COM ORIGEM)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üìä Google Sheets - Salvar Lead (COM ORIGEM)": {
      "main": [
        [
          {
            "node": "‚úâÔ∏è Claude - Gerar Email 1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "‚úâÔ∏è Claude - Gerar Email 1": {
      "main": [
        [
          {
            "node": "‚öôÔ∏è Code - Parse Email Claude",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "‚öôÔ∏è Code - Parse Email Claude": {
      "main": [
        [
          {
            "node": "üì≤ Telegram - Pedir Aprova√ß√£o",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üì± Telegram - Receber Resposta": {
      "main": [
        [
          {
            "node": "‚ùì IF - Email Aprovado?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "‚ùì IF - Email Aprovado?": {
      "main": [
        [
          {
            "node": "‚öôÔ∏è Code - Extrair Email Aprovado",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "‚ùå Telegram - Email Rejeitado",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "‚öôÔ∏è Code - Extrair Email Aprovado": {
      "main": [
        [
          {
            "node": "üîç Sheets - Buscar Lead Aprovado",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üîç Sheets - Buscar Lead Aprovado": {
      "main": [
        [
          {
            "node": "üìß Email - Enviar ao Lead",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üìß Email - Enviar ao Lead": {
      "main": [
        [
          {
            "node": "‚úÖ Sheets - Marcar Email Enviado",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "‚úÖ Sheets - Marcar Email Enviado": {
      "main": [
        [
          {
            "node": "‚úÖ Telegram - Confirmar Envio",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "‚úÖ Telegram - Confirmar Envio": {
      "main": [
        [
          {
            "node": "üî• IF - Lead Quente/Morno?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üî• IF - Lead Quente/Morno?": {
      "main": [
        [
          {
            "node": "‚è∞ Execute - Email Sequence 2",
            "type": "main",
            "index": 0
          },
          {
            "node": "üì± Execute - WhatsApp Followup",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "üå± Execute - Lead Nurturing",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "‚è∞ Execute - Email Sequence 2": {
      "main": [
        [
          {
            "node": "‚úÖ Webhook Response - Sucesso",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üì± Execute - WhatsApp Followup": {
      "main": [
        [
          {
            "node": "‚úÖ Webhook Response - Sucesso",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üå± Execute - Lead Nurturing": {
      "main": [
        [
          {
            "node": "‚úÖ Webhook Response - Sucesso",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "amj-v3.2-webhook-unico",
  "meta": {
    "instanceId": "amj-production",
    "templateCreatedBy": "Claude Code AI Assistant"
  },
  "id": "amj-lead-system-v32-webhook-unico",
  "tags": [
    {
      "id": "amj-automation",
      "name": "AMJ Automation"
    },
    {
      "id": "lead-management",
      "name": "Lead Management"
    },
    {
      "id": "webhook-unico",
      "name": "Webhook √önico"
    }
  ]
}
